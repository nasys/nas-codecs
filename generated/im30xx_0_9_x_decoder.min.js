function stringFromUTF8Array(e){for(var t=[1,1,1,1,2,2,3,0],a=e.length,n="",r=0;r<a;){var i=e[r++];if(128&i){var u=t[i>>3&7];if(!(64&i)||!u||r+u>a)return null;for(i&=63>>u;u>0;u-=1){var _=e[r++];if(128!=(192&_))return null;i=i<<6|63&_}}n+=String.fromCharCode(i)}return n}function BitExtract(e){this.data=e,this.offset=0}function BinaryExtract(e){this.buffer=e,this.offset=0}function pad(e,t){for(var a=""+e;a.length<t;)a="0"+a;return a}function intToHexStr(e,t){return pad(e.toString(16).toUpperCase(),t)}function meteringTimeFormat(e,t){if(255===e)return"live";if(e>143)return t.errors.push("invalid_metering_time"),"invalid_metering_time";var a=10*e,n=a%60;return pad(Math.floor(a/60),2)+":"+pad(n,2)+":00Z"}function formatEpoch(e,t){return 10!==(""+e).length?(t.errors.push("invalid_date"),"invalid_date"):new Date(1e3*e).toISOString()}function formatDate(e,t){var a=""+e;return 6!==a.length?(t.errors.push("invalid_date"),"invalid_date"):"20"+a.slice(0,2)+"-"+a.slice(2,4)+"-"+a.slice(4,6)}function formatYymm(e,t){var a=""+e;return 4!==a.length?(t.errors.push("invalid_date"),"invalid_date"):a.slice(0,2)+"-"+a.slice(2,4)+"---T"}function formatDdhh(e,t){var a=""+e;return 4!==a.length?(t.errors.push("invalid_time"),"invalid_time"):"--"+a.slice(0,2)+"T"+a.slice(2,4)+":00Z"}function formatTime(e,t){var a=""+e;return 5!==a.length&&6!==a.length?(t.errors.push("invalid_time"),"invalid_time"):6===a.length?a.slice(0,2)+":"+a.slice(2,4)+":"+a.slice(4,6)+"Z":5===a.length?"0"+a.slice(0,1)+":"+a.slice(1,3)+":"+a.slice(3,5)+"Z":void 0}function meter_display(e,t){var a={"21x":"heat_meter","31x":"heat_cooling_meter","41x":"heat_neter","51x":"cooling_meter","61x":"heat_cooling_meter","71x":"heat_volume_meter","81x":"cold_volume_meter","91x":"energy_meter"}[e.toString().slice(0,2)+"x"];return a||t.errors.push("invalid_meter_display_value"),a}function meter_tariff(e,t){var a={0:"no_active_tariff",11:"power_tariff",12:"flow_tariff",13:"t1_t2_tariff",14:"inlet_tariff",15:"outlet_tariff",19:"time_controlled_tariff",20:"heat_cooling_volume_tariff",21:"pq_tariff"}[e.toString()];return a||t.errors.push("invalid_meter_tariff_value"),a}function pulse_input(e,t,a){var n={1:"100 m3/h",2:"50 m3/h",3:"25 m3/h",4:"10 m3/h",5:"5 m3/h",6:"2.5 m3/h",7:"1 m3/h",24:"10 m3/h",25:"5 m3/h",26:"2.5 m3/h",27:"1 m3/h",40:"1000 m3/h",50:"2500 kW",51:"150 kW",52:"120 kW",53:"75 kW",54:"30 kW",55:"25 kW",56:"20 kW",57:"15 kW",58:"7,5 kW",59:"750 kW",60:"1250 kW",61:"75 kW",62:"15 kW",70:"25000 kW",71:"100 m3/h",72:"50 m3/h",73:"25 m3/h",74:"10 m3/h",75:"5 m3/h",76:"2.5 m3/h",77:"1 m3/h",84:"10 m3/h",85:"5 m3/h",86:"2.5 m3/h",87:"1 m3/h",90:"1000 m3/h"}[e.toString()];return n||t.errors.push("invalid_pulse_input_".pulse_letter),n}function meter_leakage_limit(e,t){var a={0:"off",1:"1%_qp_+_20%_q",2:"1%_qp_+_10%_q",3:"05%_qp_+_20%_q",4:"05%_qp_+_10%_q"}[e.toString()];return a||t.errors.push("invalid_meter_leakage_limits_v1_v2"),a}function leakage_limit_cold(e,t){var a={0:"off",1:"30min_no_pulse",2:"1h_no_pulse",3:"2h_no_pulse"}[e.toString()];return a||t.errors.push("invalid_meter_leakage_limit_cold_ina_inb"),a}function kamstrup_config1(e,t){if(!(e.length<8))return e.slice(0,1)+" "+e.slice(1,2)+" "+e.slice(2,5)+" "+e.slice(5,8);t.errors.push("Invalid_kamstrup_config_1_length")}function bootParser(e,t,a){t.packet_type="boot_packet",t.device_serial=intToHexStr(e.getUint32(),8);var n=e.getUint8(),r=e.getUint8(),i=e.getUint8();t.device_firmware_version=n+"."+r+"."+i,t.kamstrup_meter_id=e.getUint32()+4294967296*e.getUint8(),t.kamstrup_config_1=kamstrup_config1(pad(e.getUint32(),8),a);var u=e.getUint16(),_=e.getUint8(),l=e.getUint8(),o=e.getUint8(),v=e.getUint8(),c=e.getUint8();t.kamstrup_config_2=u+" "+pad(_,2)+" "+pad(l,2)+" "+o+" "+pad(v,2)+" "+pad(c,2),t.kamstrup_type=meter_display(u,a),t.kamstrup_tariff=meter_tariff(_,a),t.kamstrup_pulse_input_a=pulse_input(l,a),t.kamstrup_pulse_input_b=pulse_input(o,a),t.kamstrup_leakage_limits_v1_v2=meter_leakage_limit(v),t.kamstrup_leakage_limit_cold_ina_inb=leakage_limit_cold(c),intToHexStr(e.getUint32(),8);var s=e.getUint8Bits();t.device_lorawan_class=s.getBits(1)?"class_C":"class_A",t.device_time_utc=formatEpoch(e.getUint32())}function fixed_measurement_interval(e,t){switch(e){case 0:return fixed_measuring_interval="not_used";case 1:return fixed_measuring_interval="10_min";case 2:return fixed_measuring_interval="20_min";case 3:return fixed_measuring_interval="30_min";case 4:return fixed_measuring_interval="1_h";case 5:return fixed_measuring_interval="24_h";default:return t.errors.push("invalid_interval"),"invalid_interval"}}function value_conv(e){return Math.round(100*(e+Number.EPSILON))/100}function extractRegister(e,t){var a=e.getUint8();switch(a){case 1:return{name:"date",val:formatDate(e.getUint32(),t),unit:""};case 2:return{name:"heat_energy_e1",val:value_conv(e.getFloat()),unit:"kWh"};case 3:return{name:"heat_energy_e2",val:value_conv(e.getFloat()),unit:"kWh"};case 4:return{name:"cooling_energy_e3",val:value_conv(e.getFloat()),unit:"kWh"};case 5:return{name:"intlet_energy_e4",val:value_conv(e.getFloat()),unit:"kWh"};case 6:return{name:"outlet_energy_e5",val:value_conv(e.getFloat()),unit:"kWh"};case 7:return{name:"tap_water_energy_e6",val:value_conv(e.getFloat()),unit:"kWh"};case 8:return{name:"tap_water_energy_e7",val:value_conv(e.getFloat()),unit:"kWh"};case 9:return{name:"energy_e8",val:value_conv(e.getUint32()),unit:""};case 10:return{name:"energy_e9",val:value_conv(e.getUint32()),unit:""};case 11:return{name:"tariff_ta2",val:value_conv(e.getUint32()),unit:""};case 12:return{name:"tariff_ta3",val:value_conv(e.getUint32()),unit:""};case 13:return{name:"volume_v1",val:value_conv(e.getFloat()),unit:"m3"};case 14:return{name:"volume_v2",val:value_conv(e.getFloat()),unit:"m3"};case 15:return{name:"pulse_input_a1",val:value_conv(e.getUint32()),unit:""};case 16:case 99:return{name:"pulse_input_b2",val:value_conv(e.getUint32()),unit:""};case 17:return{name:"mass_m1",val:value_conv(e.getFloat()),unit:"t"};case 18:return{name:"mass_m2",val:value_conv(e.getFloat()),unit:"t"};case 19:return{name:"operating_hours",val:value_conv(e.getUint32()),unit:""};case 20:return{name:"info_event_counter",val:value_conv(e.getUint32()),unit:""};case 21:return{name:"time",val:formatTime(e.getUint32(),t),unit:""};case 22:return{name:"info_code",val:value_conv(e.getUint32()),unit:""};case 23:case 127:return{name:"t1_actual",val:value_conv(e.getFloat()),unit:"C"};case 24:case 128:return{name:"t2_actual",val:value_conv(e.getFloat()),unit:"C"};case 25:case 26:return{name:"t3_actual",val:value_conv(e.getFloat()),unit:"C"};case 27:return{name:"t1_t2_diff_temp",val:value_conv(e.getFloat()),unit:"C"};case 28:return{name:"p1_actual",val:value_conv(e.getFloat()),unit:"bar"};case 29:return{name:"p2_actual",val:value_conv(e.getFloat()),unit:"bar"};case 30:return{name:"flow_v1_actual",val:value_conv(e.getFloat()),unit:"L_per_h"};case 31:return{name:"flow_v2_actual",val:value_conv(e.getFloat()),unit:"L_per_h"};case 32:return{name:"power_e1_actual",val:value_conv(e.getFloat()),unit:"kW"};case 33:return{name:"flow_v1_max_year_date",val:formatDate(e.getUint32(),t),unit:""};case 34:case 103:return{name:"flow_v1_max_year",val:value_conv(e.getFloat()),unit:"L_per_h"};case 35:return{name:"flow_v1_min_year_date",val:formatDate(e.getUint32(),t),unit:""};case 36:case 104:return{name:"flow_v1_min_year",val:value_conv(e.getFloat()),unit:"L_per_h"};case 37:return{name:"power_max_year_date",val:formatDate(e.getUint32(),t),unit:""};case 38:case 105:return{name:"power_max_year",val:value_conv(e.getFloat()),unit:"kW"};case 39:return{name:"power_min_year_date",val:formatDate(e.getUint32(),t),unit:""};case 40:case 106:return{name:"power_min_year",val:value_conv(e.getFloat()),unit:"kW"};case 41:return{name:"flow_v1_max_month_date",val:formatDate(e.getUint32(),t),unit:""};case 42:return{name:"flow_v1_max_month",val:value_conv(e.getFloat64()),unit:"L_per_h"};case 43:return{name:"flow_v1_min_month_date",val:formatDate(e.getUint32(),t),unit:""};case 44:return{name:"flow_v1_min_month",val:value_conv(e.getFloat64()),unit:"L_per_h"};case 45:return{name:"power_max_month_date",val:formatDate(e.getUint32(),t),unit:""};case 46:case 109:return{name:"power_max_month",val:value_conv(e.getFloat()),unit:"kW"};case 47:return{name:"power_min_month_date",val:formatDate(e.getUint32(),t),unit:""};case 48:case 110:return{name:"power_min_month",val:value_conv(e.getFloat()),unit:"kW"};case 49:return{name:"t1_average_year",val:value_conv(e.getFloat()),unit:"C"};case 50:return{name:"t2_average_year",val:value_conv(e.getFloat()),unit:"C"};case 51:return{name:"t1_average_month",val:value_conv(e.getFloat()),unit:"C"};case 52:return{name:"t2_average_month",val:value_conv(e.getFloat()),unit:"C"};case 53:return{name:"tariff_limit_tl2",val:value_conv(e.getUint32()),unit:""};case 54:return{name:"tariff_limit_tl3",val:value_conv(e.getUint32()),unit:""};case 55:return{name:"target-date",val:formatDate(e.getUint32(),t),unit:""};case 56:return{name:"program_no",val:value_conv(e.getUint32()),unit:""};case 57:return{name:"config_no_1",val:value_conv(e.getUint32()),unit:""};case 58:return{name:"config_no_2",val:value_conv(e.getUint32()),unit:""};case 59:return{name:"serial_no",val:value_conv(e.getUint32()),unit:""};case 60:return{name:"customer_no_2",val:value_conv(e.getUint32()),unit:""};case 61:return{name:"customer_no_1",val:value_conv(e.getUint32()),unit:""};case 62:return{name:"meter_no_input_a1",val:value_conv(e.getUint32()),unit:""};case 63:return{name:"meter_no_input_b1",val:value_conv(e.getUint32()),unit:""};case 64:return{name:"meter_type_incl_sw_editing",val:value_conv(e.getUint32()),unit:""};case 65:return{name:"sw_check_sum",val:value_conv(e.getUint32()),unit:""};case 66:return{name:"energy_high_res_test",val:value_conv(e.getUint32()),unit:""};case 67:return{name:"top_module_id",val:value_conv(e.getUint32()),unit:""};case 68:return{name:"base_moduele_1_id",val:value_conv(e.getUint32()),unit:""};case 69:return{name:"error_hour_counter",val:value_conv(e.getUint32()),unit:""};case 70:return{name:"pulse_value_a1_a2",val:value_conv(e.getUint32()),unit:""};case 71:return{name:"pulse_value_b1_b2",val:value_conv(e.getUint32()),unit:""};case 72:return{name:"e1_e2",val:value_conv(e.getFloat()),unit:"kWh"};case 73:return{name:"q_sum_1",val:value_conv(e.getUint32()),unit:""};case 74:return{name:"q_sum_2",val:value_conv(e.getUint32()),unit:""};case 75:return{name:"pre_counter_1",val:value_conv(e.getUint32()),unit:""};case 76:return{name:"pre_counter_2",val:value_conv(e.getUint32()),unit:""};case 77:return{name:"e_cold",val:value_conv(e.getFloat()),unit:"kWh"};case 78:return{name:"m3tf",val:value_conv(e.getUint32()),unit:""};case 79:return{name:"m3tr",val:value_conv(e.getUint32()),unit:""};case 80:return{name:"calendar",val:value_conv(e.getUint32()),unit:""};case 81:return{name:"p_power_act",val:value_conv(e.getFloat()),unit:"kW"};case 82:return{name:"p_power_year",val:value_conv(e.getFloat()),unit:""};case 83:return{name:"date_and_time",val:value_conv(e.getFloat()),unit:""};case 84:return{name:"energy_e10",val:value_conv(e.getFloat()),unit:"kWh"};case 85:return{name:"energy_e11",val:value_conv(e.getFloat()),unit:"kWh"};case 86:return{name:"differential_energy_de",val:value_conv(e.getUint32()),unit:""};case 87:return{name:"control_energy_ce",val:value_conv(e.getUint32()),unit:""};case 88:return{name:"differential_volume_dv",val:value_conv(e.getUint32()),unit:""};case 89:return{name:"control_volume_dv",val:value_conv(e.getUint32()),unit:""};case 90:return{name:"heat_energy_a1",val:value_conv(e.getFloat()),unit:"kWh"};case 91:return{name:"heat_energy_a2",val:value_conv(e.getFloat()),unit:"kWh"};case 92:return{name:"tariff_ta4",val:value_conv(e.getUint32()),unit:""};case 93:return{name:"tariff_limit_tl4",val:value_conv(e.getUint32()),unit:""};case 94:return{name:"pulse_value_v1",val:value_conv(e.getUint32()),unit:""};case 95:return{name:"pulse_value_v2",val:value_conv(e.getUint32()),unit:""};case 96:return{name:"qp_v1",val:value_conv(e.getUint32()),unit:""};case 97:return{name:"qp_v2",val:value_conv(e.getUint32()),unit:""};case 98:return{name:"pulse_input_a2",val:value_conv(e.getUint32()),unit:""};case 100:return{name:"meter_no_input_a2",val:value_conv(e.getUint32()),unit:""};case 101:return{name:"meter_no_input_b2",val:value_conv(e.getUint32()),unit:""};case 102:return{name:"info_bits",val:value_conv(e.getUint32()),unit:""};case 107:return{name:"flow_v1_max_month",val:value_conv(e.getFloat()),unit:"L_per_h"};case 108:return{name:"flow_v1_min_month",val:value_conv(e.getFloat()),unit:"L_per_h"};case 111:return{name:"flow_v1_max_day",val:value_conv(e.getFloat()),unit:"L_per_h"};case 112:return{name:"flow_v1_min_day",val:value_conv(e.getFloat()),unit:"L_per_h"};case 113:return{name:"cop",val:value_conv(e.getUint32()),unit:""};case 114:return{name:"cop_average_period",val:value_conv(e.getUint32()),unit:""};case 115:return{name:"cop_year",val:value_conv(e.getUint32()),unit:""};case 116:return{name:"cop_month",val:value_conv(e.getUint32()),unit:""};case 117:return{name:"t1_time_average_day",val:value_conv(e.getFloat()),unit:"C"};case 118:return{name:"t2_time_average_day",val:value_conv(e.getFloat()),unit:"C"};case 119:return{name:"t3_time_average_day",val:value_conv(e.getFloat()),unit:"C"};case 120:return{name:"t1_time_average_hour",val:value_conv(e.getFloat()),unit:"C"};case 121:return{name:"t2_time_average_hour",val:value_conv(e.getFloat()),unit:"C"};case 122:return{name:"t3_time_average_hour",val:value_conv(e.getFloat()),unit:"C"};case 123:return{name:"p1_average_day",val:value_conv(e.getFloat()),unit:"kW"};case 124:return{name:"p2_average_day",val:value_conv(e.getFloat()),unit:"kW"};case 125:return{name:"p1_average_hour",val:value_conv(e.getFloat()),unit:"kW"};case 126:return{name:"p2_average_hour",val:value_conv(e.getFloat()),unit:"kW"};case 129:return{name:"t1_t2_diff_temp",val:value_conv(e.getUint32()),unit:""};case 130:return{name:"power_input_b1",val:value_conv(e.getUint32()),unit:""};case 131:return{name:"controlled_output_c1_c2",val:value_conv(e.getUint32()),unit:""};case 132:return{name:"controlled_output_d1_d2",val:value_conv(e.getUint32()),unit:""};case 133:return{name:"theta_hc",val:value_conv(e.getUint32()),unit:""};case 134:return{name:"temperature_offset",val:value_conv(e.getUint32()),unit:""};case 135:return{name:"t2_preset",val:value_conv(e.getFloat()),unit:"C"};case 136:return{name:"t5_limit",val:value_conv(e.getFloat()),unit:"C"};case 137:return{name:"qp_average time",val:value_conv(e.getUint32()),unit:""};case 138:return{name:"target_date_1_year",val:value_conv(e.getUint32()),unit:""};case 139:return{name:"target_date_2_year",val:value_conv(e.getUint32()),unit:""};case 140:return{name:"target_date_1_month",val:value_conv(e.getUint32()),unit:""};case 141:return{name:"target_date_2_month",val:value_conv(e.getUint32()),unit:""};case 142:return{name:"config_no_3",val:value_conv(e.getUint32()),unit:""};case 143:return{name:"config_no_4",val:value_conv(e.getUint32()),unit:""};case 144:return{name:"type_no",val:value_conv(e.getUint32()),unit:""};case 145:return{name:"din_meter_id",val:value_conv(e.getUint32()),unit:""};case 146:return{name:"sw_revision",val:value_conv(e.getUint32()),unit:""};case 147:return{name:"base_module_2_id",val:value_conv(e.getUint32()),unit:""};case 148:return{name:"external_module_id",val:value_conv(e.getUint32()),unit:""};case 149:return{name:"bus_pri_adr_module_1",val:value_conv(e.getUint32()),unit:""};case 150:return{name:"m_bus_sec_adr_module_1",val:value_conv(e.getUint32()),unit:""};case 151:return{name:"bus_pri_adr_module ",val:value_conv(e.getUint32()),unit:""};case 152:return{name:"m_bus_sec_adr_module_2",val:value_conv(e.getUint32()),unit:""};case 153:return{name:"bus_pri_adr_ext_module",val:value_conv(e.getUint32()),unit:""};case 154:return{name:"m_bus_sec_adr_ext_module",val:value_conv(e.getUint32()),unit:""};case 155:return{name:"m_bus_pri_adr_internal",val:value_conv(e.getUint32()),unit:""};case 156:return{name:"m_bus_sec_adr_internal",val:value_conv(e.getUint32()),unit:""};case 157:return{name:"config_counter",val:value_conv(e.getUint32()),unit:""};case 158:return{name:"time_stamp_1_(yy.mm)",val:formatYymm(e.getUint32(),t),unit:""};case 159:return{name:"time_stamp_1_(dd.hh)",val:formatDdhh(e.getUint32(),t),unit:""};case 160:return{name:"type_approval_rev_heat",val:value_conv(e.getUint32()),unit:""};case 161:return{name:"type_approval_rev_cooling",val:value_conv(e.getUint32()),unit:""};case 162:return{name:"type_approval_rev_national",val:value_conv(e.getUint32()),unit:""};case 163:return{name:"e1_high_res_auto_int",val:value_conv(e.getFloat()),unit:"kWh"};case 164:return{name:"e3_high_res_auto_int",val:value_conv(e.getFloat()),unit:"kWh"};case 165:return{name:"v1_high_res_auto_int",val:value_conv(e.getFloat()),unit:"m3"};case 166:return{name:"t1_avg_auto_int",val:value_conv(e.getFloat()),unit:"C"};case 167:return{name:"t2_avg_auto_int",val:value_conv(e.getFloat()),unit:"C"};case 168:return{name:"a1_auto_int",val:value_conv(e.getUint32()),unit:""};case 169:return{name:"a2_auto_int",val:value_conv(e.getUint32()),unit:""};case 170:return{name:"e1_hige_res",val:value_conv(e.getFloat()),unit:"kWh"};case 171:return{name:"e3_high_res",val:value_conv(e.getFloat()),unit:"kWh"};case 172:return{name:"v1_high_res",val:value_conv(e.getFloat()),unit:"m3"};case 173:return{name:"v1_reverse",val:value_conv(e.getFloat()),unit:"m3"};case 174:return{name:"volume_high_res_test",val:value_conv(e.getUint32()),unit:""};case 175:return{name:"optical_eye_lock",val:value_conv(e.getUint32()),unit:""};default:return t.errors.push("invalid_register "+a),null}}function extractRegisters(e,t,a){for(;e.availableLen();){var n=extractRegister(e,a),r=n.name;n.unit.length&&(r=n.name+"__"+n.unit),t["kamstrup_"+r]=n.val}}function extractRegisterList(e,t,a){const n=[];for(;e.availableLen();){var r=extractRegister(new BinaryExtract([e.getUint8(),0,0,0,0]),{errors:[],warnings:[]});if(null==r){a.errors.push("invalid_register_"+r.name);break}n.push(r.name)}t.kamstrup_registers=n}function statusParser(e,t,a){t.packet_type="status_packet";var n=e.getUint8();t.metering_time=meteringTimeFormat(n,a);var r=e.getUint32(),i=new Date(1e3*r);t.utc_timestamp=i.toISOString().replace(/.\d+Z$/g,"Z"),t.sensor_battery=e.getUint8(),t.sensor_rssi__dBm=e.getInt8(),extractRegisters(e,t,a)}function usageParser(e,t,a){var n=e.getInt8();if(0===n){t.packet_type="usage_packet";var r=e.getUint8();return t.measuring_time=meteringTimeFormat(r,a),void extractRegisters(e,t,a)}if(2===n){t.packet_type="pulse_usage_packet";r=e.getUint8();return t.measuring_time=meteringTimeFormat(r,a),t.kamstrup_pulse_1_count=e.getUint32(),void(t.kamstrup_pulse_2_count=e.getUint32())}a.errors.push("invalid_packet_header")}function configuration_packet(e,t,a){switch(e.getUint8()){case 0:t.packet_type="interval_config",t.usage_interval__s=e.getUint32(),t.status_interval__s=e.getUint32();var n=e.getUint8Bits();n.getBits(1),t.kamstrup_pulse_inputs_enable=n.getBits(1),t.lorawan_class=!0===n.getBits(1)?"class_C":"class_A",t.fixed_measurement_enabled=n.getBits(1);var r=n.getBits(3);t.fixed_measuring_interval=fixed_measurement_interval(r,a);break;case 1:t.packet_type="usage_register_config",extractRegisterList(e,t,a);break;case 2:t.packet_type="status_register_config",extractRegisterList(e,t,a);break;case 3:var i=e.getUint32(),u=new Date(1e3*i);t.packet_type="device_time_config",t.device_clock=u.toISOString().replace(/.\d+Z$/g,"Z");break;case 4:t.packet_type="device_time_offset_config",t.device_time_offset__s=e.getInt16();break;default:a.errors.push("invalid_packet_type")}}function update_mode_packet(e,t,a){255!==e.getUint8()?a.errors.push("invalid_command"):t.packet_type="activate_dfu_command"}function command_message(e,t,a){switch(e.getUint8()){case 0:t.packet_type="request_register_values",extractRegisterList(e,t,a);break;case 2:t.packet_type="request_digital_inputs";break;case 3:t.packet_type="request_historic_data";var n=e.getUint8();255===n&&a.errors.push("invalid_time"),t.measurement_time=meteringTimeFormat(n);break;default:a.errors.push("invalid_command")}}function boot_debug_packet(e,t,a){switch(e.getUint8()){case 0:bootParser(e,t,a);break;case 1:case 49:t.packet_type="shutdown_packet";break;default:a.errors.push("invalid_packet_type")}}function decodeByFport(e,t,a,n){if(0!==t.length){var r=new BinaryExtract(t);switch(e){case 24:statusParser(r,a,n);break;case 25:usageParser(r,a,n);break;case 50:configuration_packet(r,a,n);break;case 51:update_mode_packet(r,a,n);break;case 60:command_message(r,a,n);break;case 99:boot_debug_packet(r,a,n);break;default:n.errors.push("invalid_fport")}r.availableLen()>0&&n.errors.push("packet_too_long")}else n.errors.push("empty_payload")}function decodeRaw(e,t){var a={},n={errors:[],warnings:[]};try{decodeByFport(e,t,a,n)}catch(e){n.errors.push(e.message)}return{data:a,errors:n.errors,warnings:n.warnings}}function decodeDownlink(e){return decodeRaw(e.fPort,e.bytes)}function decodeUplink(e){return decodeRaw(e.fPort,e.bytes)}function Decoder(e,t){return decodeRaw(t,e)}function Decode(e,t){return decodeRaw(e,t)}BitExtract.prototype._assertOnRemainingLength=function(e){if(0===e)throw Error("invalid zero length bit field");if(this.offset+e>8)throw Error("invalid number of bits extracted")},BitExtract.prototype.getBits=function(e){this._assertOnRemainingLength(e);var t=Math.pow(2,e)-1,a=this.data>>this.offset&t;return this.offset+=e,1===e?Boolean(a):a},BinaryExtract.prototype.availableLen=function(){return this.buffer.length-this.offset},BinaryExtract.prototype._assertOnRemainingLength=function(e){if(e>this.availableLen())throw Error("invalid buffer length: too short")},BinaryExtract.prototype.getUint8=function(){return this._assertOnRemainingLength(1),this.buffer[this.offset++]},BinaryExtract.prototype.getInt8=function(){var e=this.getUint8();return e>127?e-256:e},BinaryExtract.prototype.getUint16=function(){return this._assertOnRemainingLength(2),this.buffer[this.offset++]+256*this.buffer[this.offset++]},BinaryExtract.prototype.getInt16=function(){var e=this.getUint16();return e>32767?e-65536:e},BinaryExtract.prototype.getUint24=function(){return this._assertOnRemainingLength(3),this.buffer[this.offset++]+256*this.buffer[this.offset++]+65536*this.buffer[this.offset++]},BinaryExtract.prototype.getUint32=function(){return this._assertOnRemainingLength(4),this.buffer[this.offset++]+256*this.buffer[this.offset++]+65536*this.buffer[this.offset++]+16777216*this.buffer[this.offset++]},BinaryExtract.prototype.getInt32=function(){var e=this.getUint32();return e>2147483647?e-4294967296:e},BinaryExtract.prototype.getUint64=function(){return this.getUint32()+4294967296*this.getUint32()},BinaryExtract.prototype.getTextUtf8=function(e){this._assertOnRemainingLength(e);var t=stringFromUTF8Array(this.buffer.slice(this.offset,this.offset+e));return this.offset+=e,t},BinaryExtract.prototype.getUint8Bits=function(){return new BitExtract(this.getUint8())},BinaryExtract.prototype.getRaw=function(e){this._assertOnRemainingLength(e);var t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},BinaryExtract.prototype.getFloat=function(){var e=this.getUint32(),t=2147483648&e?-1:1,a=(e>>23&255)-127,n=8388607&e;if(128===a)return t*(n?Number.NaN:Number.POSITIVE_INFINITY);if(-127===a){if(0===n)return 0*t;a=-126,n/=1<<22}else n=(n|1<<23)/(1<<23);return t*n*Math.pow(2,a)};
